<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ponscr-ext</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.0"><link rel="home" href="index.html" title=""><link rel="up" href="rn01.html" title="Ponscripter manual"><link rel="prev" href="rn01re03.html" title="ponscr-syntax"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ponscr-ext</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="rn01re03.html">Prev</a> </td><th width="60%" align="center">Ponscripter manual</th><td width="20%" align="right"> </td></tr></table><hr></div><div class="refentry"><a name="ponscr-ext.7"></a><div class="titlepage"></div>
  
  

  <div class="refnamediv"><h2>Name</h2><p>
    ponscr-ext — Ponscripter extension commands
  </p></div>

  <div class="refsect1"><a name="idm139832484171024"></a><h2>Description</h2>
    
    <p>
      This page documents Ponscripter-specific extensions,
      i.e. commands that are not present (or operate differently) in
      NScripter or ONScripter.
    </p><p>
      See <a class="link" href="rn01re01.html" title="ponscripter">Overview</a> for an overview of other documentation.
    </p><div class="refsect2"><a name="idm139832484168640"></a><h3>Detecting Ponscripter</h3>
      
      <p>
        It may occasionally be desirable to have a single script that
        will load in both Ponscripter and other NScripter-type
        interpreters.  (The test scripts in the Ponscripter
        distribution are an example of such a case.)
      </p><p>
        A script can detect whether it is running under Ponscripter by
        defining a numalias:
        </p><pre class="programlisting"><code class="function">numalias</code> <code class="constant">PONSCRIPTER</code>, 0</pre><p>
        Ponscripter treats this as a special case, and gives the
        numalias the value 1 instead, so platform-specific code can
        then be included by testing the value of
        <code class="constant">PONSCRIPTER</code> and branching as appropriate.
      </p></div>
    
    <div class="refsect2"><a name="idm139832484164720"></a><h3>Fonts</h3>
      

      <div class="variablelist"><dl class="variablelist"><dt><span class="term">
            <code class="function">h_mapfont</code>
            <em class="replaceable"><code>slot</code></em>,
            <em class="replaceable"><code>filename</code></em>,
            [<span class="optional"><em class="replaceable"><code>metrics</code></em></span>]
          </span></dt><dd>
            <p class="simpara">
              Maps <em class="replaceable"><code>filename</code></em> to font slot
              number <em class="replaceable"><code>slot</code></em> (0-7).
            </p><p class="simpara">
              For TrueType and OpenType fonts,
              <em class="replaceable"><code>filename</code></em> should name the
              <code class="filename">.ttf</code> or <code class="filename">.otf</code>
              file.  For Type 1 fonts,
              <em class="replaceable"><code>filename</code></em>&gt; should name the
              <code class="filename">.pfa</code> or <code class="filename">.pfb</code>
              file, and the <em class="replaceable"><code>metrics</code></em>
              argument should be used to provide the corresponding
              <code class="filename">.afm</code> file.
            </p><p class="simpara">
              Filenames are relative to the game's data path.  If a
              file is not found, it is then sought within a
              <code class="filename">fonts</code> subdirectory of the data
              path, then in the game's archive, and then the game
              binary itself is checked in case the font has been
              embedded there.  Finally, for compatibility, Ponscripter
              checks for a file named <code class="filename">default.ttf</code>
              in the game's data path, and uses that if it exists.
              Note that at no stage does Ponscripter look at the fonts
              installed on the user's computer; games must distribute
              their own fonts.  Note also that fonts are loaded
              lazily, so the point of failure if a file is missing
              will be when that font is first
              <span class="emphasis"><em>used</em></span>, not when this command is
              executed.
            </p><p class="simpara">
              The intended convention is that the eight font slots
              should represent two typefaces (a text face and a
              display face), each with regular, italic, bold, and
              bold-italic styles.  These are assigned in ascending
              order: slot 0 (the default face) should be the regular
              text font, slot 1 the italic text font, slot 4 the
              regular display font, etc.  You can, of course, assign
              the fonts however you like, but following the convention
              permits straightforward use of mnemonic formatting tags.
              See <a class="link" href="rn01re03.html#f-sel-t">Font selection tags</a> in
              <a class="link" href="rn01re03.html" title="ponscr-syntax">Syntax</a> for details of font selection.
            </p><p class="simpara">
              Mapping fonts in this way is optional.  If a slot is
              used that has not had a font assigned to it, the default
              filename will be
              <code class="filename">face<em class="replaceable"><code>N</code></em>.ttf</code>,
              where <em class="replaceable"><code>N</code></em> is the slot number.
            </p></dd><dt><span class="term">
            <code class="function">h_rendering</code>
            <em class="replaceable"><code>hinting</code></em>,
            <em class="replaceable"><code>positioning</code></em>,
            [<span class="optional"><em class="replaceable"><code>rendermode</code></em></span>]
          </span></dt><dd>
            <p class="simpara">
              Configures Freetype text rendering.
            </p><p><em class="replaceable"><code>hinting</code></em> should be one of the
              following barewords:
              </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="constant">none</code></span></dt><dd>
                    glyphs are unhinted (default)</dd><dt><span class="term"><code class="constant">full</code></span></dt><dd>
                    Freetype hinting is used</dd><dt><span class="term"><code class="constant">light</code></span></dt><dd>
                    Light hinting is used</dd></dl></div><p>
              The optimum settings depend on the fonts in use.  In
              general, Freetype hinting makes TrueType fonts look
              hideous, but it does sometimes help with Type 1 fonts.
            </p><p class="simpara"><em class="replaceable"><code>positioning</code></em> should be the
              bareword <code class="constant">integer</code>, which causes
              characters to be aligned to whole pixels.  The
              alternative is <code class="constant">float</code>, which uses
              subpixel positioning and would in theory give better
              spacing, but has never worked properly and generally
              looks awful.
            </p><p class="simpara">
              The optional <em class="replaceable"><code>rendermode</code></em>
              parameter can be used to override the Freetype rendering
              mode.  It should be one of the barewords
              <code class="constant">light</code> or
              <code class="constant">normal</code>.  By default, light
              rendering is used for light hinting, and normal
              rendering otherwise; this should always be what you
              want.
            </p></dd><dt><span class="term">
            <code class="function">h_fontstyle</code>
            <em class="replaceable"><code>string</code></em>
          </span></dt><dd>
            <p class="simpara">
              Sets the default text styling.  This command is
              equivalent to inserting
              <code class="literal">~d<em class="replaceable"><code>string</code></em>~</code>
              at the start of every subsequent text display command
              (though it has no effect on sprites).
            </p><p class="simpara">
              Only font style tags may be used; size and position tags
              are not supported.
            </p><p>
              For example, to set an entire section of the game in
              your italic display font, you could use the code
              </p><pre class="programlisting"><code class="function">h_fontstyle</code> ^si^
^Your text here\
^Several pages in italic display font\
<code class="function">h_fontstyle</code> ^d^  <span class="emphasis"><em>; to reset</em></span></pre></dd><dt><span class="term">
            <code class="function">h_ligate</code>
            <em class="replaceable"><code>input</code></em>,
            <em class="replaceable"><code>action</code></em>
          , </span><span class="term">
            <code class="function">h_ligate</code>
            <em class="replaceable"><code>preset</code></em>
          </span></dt><dd>
            <p>
              Add or remove shortcut sequences.  (See <a class="link" href="rn01re03.html#ligs" title="Ligatures and shortcuts">Ligatures and shortcuts</a> in <a class="link" href="rn01re03.html" title="ponscr-syntax">Syntax</a>.)
            </p><p>
              The two-argument form of this command adds or removes a
              single sequence. <em class="replaceable"><code>input</code></em> is a
              string representing the sequence;
              <em class="replaceable"><code>action</code></em> is either the bareword
              <code class="literal">remove</code>, which causes any shortcut
              associated with the sequence to be undefined; an
              integer, which is taken as the Unicode codepoint to be
              inserted when the sequence is encountered; or a string,
              the first character of which is inserted when the
              sequence is encountered.  For example:
              </p><pre class="programlisting"><code class="function">h_ligate</code> "fi", 0xfb01</pre><p>
              The one-argument form is used to apply preset settings.
              <em class="replaceable"><code>preset</code></em> is one of the following
              values:
              </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">none</code></span></dt><dd>
                    <p>
                      Clears all definitions, <span class="emphasis"><em>including the
                      defaults</em></span>.  To restore the default
                      definitions, use <code class="literal">default</code> as
                      well (see following).
                    </p></dd><dt><span class="term"><code class="literal">default</code></span></dt><dd>
                    
                      Redefines the standard shortcuts, i.e. curly
                      quotes and the <code class="literal">#</code>-sequences
                      used to escape some special syntax.
                    </dd><dt><span class="term"><code class="literal">all</code></span></dt><dd>
                    
                      Defines all sequences mentioned in this section.
                    </dd><dt><span class="term"><code class="literal">f_ligatures</code></span></dt><dd>
                    
                      Defines ligatures for fi, fl, ff, ffi, and ffl.
                    </dd><dt><span class="term"><code class="literal">punctuation</code></span></dt><dd>
                    
                      
defines the following shortcuts:
.IP "" 2
.BR ... \ \-&gt;
ellipsis
.br
.BR \-\-
\-&gt; en dash
.br
.BR \-\-\-
\-&gt; em dash
.br
.BR (c)
\-&gt; copyright symbol
.br
.BR (r)
\-&gt; registered trademark symbol
.br
.BR (tm)
\-&gt; trademark symbol
.br
.BR ++
\-&gt; dagger
.br
.BR +++
\-&gt; double dagger
.br
.BR **
\-&gt; bullet
.br
.BR %_
\-&gt; non-breaking space
.br
.BR %\-
\-&gt; non-breaking hyphen
.br
.BR %\. \ \-&gt;
thin space
                      
                    </dd></dl></div></dd></dl></div>
    </div>
    
    <div class="refsect2"><a name="idm139832484109984"></a><h3>Text controls</h3>
      
      <p></p>      
    </div>
    <div class="refsect2"><a name="idm139832484107152"></a><h3>Sprite controls</h3>
      
      <p></p>      
    </div>
    <div class="refsect2"><a name="idm139832484106000"></a><h3>Debugging</h3>
      
      <p></p>      
    </div>
    <div class="refsect2"><a name="idm139832484104848"></a><h3>Soft subtitles</h3>
      
      <p></p>      
    </div>
    <div class="refsect2"><a name="idm139832484103568"></a><h3>Extensions to existing commands</h3>
      
      <p></p>
    </div>
    
  </div>

  <div class="refsect1"><a name="idm139832484102256"></a><h2>See also</h2>
    
    <p><a class="link" href="rn01re01.html" title="ponscripter">Overview</a></p></div>
  
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="rn01re03.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="rn01.html">Up</a></td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">ponscr-syntax </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
